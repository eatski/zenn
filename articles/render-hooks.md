---
title: "todo" # 記事のタイトル
emoji: "🐺" # アイキャッチとして使われる絵文字（1文字だけ）
type: "tech" # tech: 技術記事 / idea: アイデア記事
topics: ["frontend","react"] # タグ。["markdown", "rust", "aws"]のように指定する
published: false # 公開設定（falseにすると下書き）
---

<!-- 
AIへの指示:
各セクションを、コメントに書いた「サマリ」をもとに埋めて欲しい
見出しの言い回しも適切なものに変えても良い
関数の分割方針について書く
render hooks
文章は余計な装飾をせずシンプルに
例やサンプルはしっかり
ですます
書き終わった後、以下の観点で批判的に自己レビューを行って
- ユーザーに伝わらない前提で話を書いてないか
- 間違った表現はないか
- 削れる表現はないか

-->

## 概要

<!-- 良い感じの導入 -->

## 大きなソースコードをどの様に分割するか

<!-- 
大きいと読みづらい
しかし、分割することは読み手にジャンプの手間を強制するのでトレードオフ
分割
- ファイルを分割
- 関数を分割

どういう切り口で分割するべきか？切り口が大事
台本の例を具体的に書いて
- 悪い例: セリフを言う登場人物ごとにページを分ける（一応、自分以外が何らかのセリフがあることはそれぞれ記載されている）→流れがわからないので読みにくい
- 良い例: ある程度の話のまとまりごとに分ける→読みやすい（自分が喋らないセリフがあっても）

ただ分割すれば良いだけでない

-->

## 読みづらくなる例: ロジックとマークアップで分ける

<!-- 
hooksの登場以来、マークアップとロジックを切り離そうとする流れが強かった
↑読みづらい
なぜか？マークアップとロジックは密に依存しており、繋ぎ目が大きくなってしまう
サンプルコード: ダイアログ内にフォーム（バリデーション有り）がある例
- ダイアログの開閉状態とフォームの状態を持つhooks
- それを使ってHTMLを構築する
-->

## 適切な分け方: 

<!-- 
画面の構成要素で分ける
サンプルコード: ダイアログ内にフォームがある例（アンケート機能）
- ダイアログのガワと送信
- 名前などのユーザー情報の入力
- アンケート内容の入力
とはいえ、それぞれ普通に実装するとstateを持つhooksの関数とjsxを書く関数とで分けざるを得ない
なぜならjsxを関数に切り出してstateをその中で宣言してしまうと、呼び出し側はstateを触る（値の送信などのため）ことができない。（↓例）
```tsx
const UserFormControl = () => {
    // 呼び出し元がこのstateを参照する手段がない
    const [name,setName] = useState("")

    ~~~

    return <>
        <label>名前</label>
        <input type="text" value={name} onClick={~~~}/>
    </>
}
```

こう実装せざるを得ない的なサンプルコード
-->

## render hooks のすすめ

<!-- 
> とはいえ、普通に実装するとstateを持つhooksの関数とjsxを書く関数とで分けざるを得ない
そこで render hooks を使う

```tsx
const useRenderUserFormControls = () => {
    // do something
    return {
        view,
        inputs
    }
}
```

```tsx
const HogeFormDialig = () => {
    // do something
    const userFormControls = useRenderUserFormControls();

    ~~~
    
    const handleSubmit = () => {
        post(formControls.inputs)
    }

}
```

-->

## render hooks ってそんな大袈裟なものではない

<!-- 
render hooks自体、ただ実装のパターンであり、特殊なことをしているわけではない
気軽に使っていけばいいし、気軽に使わないことを選択してもいい
 -->



